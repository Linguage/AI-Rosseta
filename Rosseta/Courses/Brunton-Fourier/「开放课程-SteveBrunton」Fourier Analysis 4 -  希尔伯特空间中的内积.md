## 希尔伯特空间中的内积
视频链接：[Inner Products in Hilbert Space](https://www.youtube.com/watch?v=g-eNeXlZKAQ&list=PLMrJAkhIeNNT_Xh3Oy0Y4LTj0Oxo8GqsC&index=4)
作者：[Steve Brunton](https://www.youtube.com/@Eigensteve)



### 引言与目的

大家好。在开始讨论傅里叶变换和傅里叶级数之前，我想先回顾一下关于**函数的内积**的概念。

我们都非常熟悉向量空间，无论是二维、三维还是N维的坐标向量或数据向量。但现在，我们要探讨的是**函数的内积**。初次接触这个概念时，对一些人来说可能会感到有些困惑。因此，我今天的目的是想让大家信服，我们为函数定义的内积，其本质与我们为向量定义的内积是高度一致的。

### 函数内积的定义

我将通过一个例子来说明。假设我们有一些关于变量 $x$ 的函数，这里是 $x$ 轴方向。我们有两个函数，一个是 $f(x)$，另一个是 $g(x)$。我们要定义这两个函数之间的内积。

我们将函数 $f(x)$ 与 $g(x)$ 的内积定义为一个积分。假设这两个函数都定义在某个区间 $[A, B]$ 上。那么，它们的内积就定义为：
$<f, g> = \int_{A}^{B} f(x) g(x) \, dx$

这里需要注意一点，如果处理的是**复值函数**（比如我们稍后在傅里叶分析中会用到的像 $e^{i\omega x}$ 这样的函数），那么内积的定义中，第二个函数 $g(x)$ 需要取**复共轭**。定义会变成：
$<f, g> = \int_{A}^{B} f(x) \overline{g(x)} \, dx$
不过，对于我们现在讨论的实值数据和实值函数 $f$ 与 $g$ 来说，$g(x)$ 的复共轭就是它本身，所以大家暂时可以不用太担心这个复共轭的问题。

这就是我们定义两个函数内积的方式。这个内积本质上告诉我们这两个函数有多么**相似**或**对齐**。这和向量内积的意义完全一样：如果两个向量正交，它们的内积为零；如果它们方向非常一致，内积就很大。函数内积也是如此。比如我在这里示意性画出的两个函数 $f$ 和 $g$ ，它们看起来非常接近，那么可以预期，当我们将它们相乘并在 $[A, B]$ 区间上积分时，会得到一个较大的内积值。

### 通过离散化连接函数内积与向量内积

接下来，我要展示的是，如果我们对这些函数进行**离散化**处理——也就是说，在一系列离散的 $x$ 位置点上对函数进行采样，然后收集这些采样值构成数据向量——那么我们刚才定义的函数积分内积，实际上可以看作是这些数据向量内积的一种极限情况。

#### 函数离散化

具体做法是这样的：我们在区间 $[A, B]$ 上选取一系列离散的采样点。假设我们在 $n$ 个离散位置 $x_1, x_2, x_3, \dots, x_n$ 对函数 $f(x)$ 进行采样，得到对应的函数值 $f_1 = f(x_1), f_2 = f(x_2), f_3 = f(x_3), \dots, f_n = f(x_n)$。对函数 $g(x)$ 也做同样的操作，得到采样值 $g_1 = g(x_1), g_2 = g(x_2), g_3 = g(x_3), \dots, g_n = g(x_n)$。

我们假设这些采样点是等间隔分布的，相邻采样点之间的距离为一个常数 $\Delta x$。这个 $\Delta x$ 大致可以认为是 $(B - A) / (n - 1)$。很显然，随着我们增加采样点数 $n$（或者说减小采样间隔 $\Delta x$），我们得到的数据点就越多，对原始函数的描述就越精细。

通过这种采样，我们就得到了两个N维的数据向量。我们将代表 $f(x)$ 采样值的向量记作 $\mathbf{f}$（带下划线表示向量，这是我们熟悉的形式）：
$\mathbf{f} = \begin{bmatrix} f_1 \\ f_2 \\ \vdots \\ f_n \end{bmatrix}$

同样地，代表 $g(x)$ 采样值的向量记作 $\mathbf{g}$：
$\mathbf{g} = \begin{bmatrix} g_1 \\ g_2 \\ \vdots \\ g_n \end{bmatrix}$

#### 向量内积计算

现在，计算这两个数据向量 $\mathbf{f}$ 和 $\mathbf{g}$ 的内积是相对直接的，我们对此有很清晰的认识和计算方法。向量内积，通常定义为 $\mathbf{g}$ 的转置乘以 $\mathbf{f}$（即 $\mathbf{g}^T \mathbf{f}$）。

形象地说，就是将向量 $\mathbf{g}$ 转置成一个行向量 $[g_1, g_2, \dots, g_n]$，然后乘以列向量 $\mathbf{f}$。
$\mathbf{g}^T \mathbf{f} = [g_1, g_2, \dots, g_n] \begin{bmatrix} f_1 \\ f_2 \\ \vdots \\ f_n \end{bmatrix}$

计算结果就是对应元素乘积之和：
$\mathbf{g}^T \mathbf{f} = f_1 g_1 + f_2 g_2 + f_3 g_3 + \dots + f_n g_n = \sum_{k=1}^{n} f_k g_k$

再次提醒，如果处理的是复值数据，那么这里应该是 $\mathbf{g}$ 的**共轭转置**（记作 $\mathbf{g}^H$），内积计算会是 $\sum_{k=1}^{n} f_k \overline{g_k}$，其中 $\overline{g_k}$ 是 $g_k$ 的复共轭。但我们目前专注于实数情况。

#### 引入归一化因子 Δx

不过，直接使用 $\sum_{k=1}^{n} f_k g_k$ 作为向量内积与函数内积的对应，存在一个小问题。如果我将采样点数加倍（例如从 $n$ 增加到 $2n$），那么这个求和的结果很可能会近似加倍，因为它包含了大约两倍的项。这似乎不太合理，我们希望内积值能反映函数本身的相似度，而不是采样密度。

为了解决这个问题，我们引入采样间隔 $\Delta x$ 对求和结果进行**缩放**或**归一化**。我们考虑用 $\left( \sum_{k=1}^{n} f_k g_k \right) \Delta x$ 这个量来与函数内积对应。

这样处理后，即使我们将分辨率加倍（$n$ 加倍，$\Delta x$ 减半），由于求和项数加倍而 $\Delta x$ 减半，两者效应会相互抵消，使得结果不会仅仅因为采样点增多而任意增大。

将 $f_k$ 替换为 $f(x_k)$， $g_k$ 替换为 $g(x_k)$，这个修正后的离散内积形式就是：
$(\text{向量内积}) \times \Delta x = \sum_{k=1}^{n} f(x_k) g(x_k) \Delta x$

#### 极限与黎曼和

现在，关键的联系就显现出来了。大家可以看到，这个形式 $\sum_{k=1}^{n} f(x_k) g(x_k) \Delta x$ 正是我们在微积分中学习过的**黎曼和 (Riemann sum)** 的形式，它就是对连续积分 $\int_{A}^{B} f(x) g(x) \, dx$ 的一种近似。

（如果考虑复数情况，$\sum_{k=1}^{n} f(x_k) \overline{g(x_k)} \Delta x$ 同样是积分 $\int_{A}^{B} f(x) \overline{g(x)} \, dx$ 的黎曼和近似。）

因此，当我们让采样间隔 $\Delta x$ 趋向于 0 时（这意味着采样点数 $n$ 趋向于无穷大，分辨率变得无限精细），这个离散的向量内积（经过 $\Delta x$ 缩放后）的黎曼和，就会精确地**收敛**到我们最初定义的**连续函数的积分内积**：
$\lim_{\Delta x \to 0} \sum_{k=1}^{n} f(x_k) g(x_k) \Delta x = \int_{A}^{B} f(x) g(x) \, dx$

### 结论与意义

所以，我希望通过这个过程向大家展示：我们为函数定义的内积（它同样衡量了函数 $f$ 和 $g$ 之间的接近程度或对齐程度，就像向量内积一样），并不是一个凭空创造出来的、与向量内积无关的“魔法”概念。它实际上就是我们熟悉的向量内积概念，在数据分辨率变得无限精细时的自然推广和极限结果。

理解这一点非常重要，因为我们接下来在学习**傅里叶级数**时，将会大量运用函数内积的概念，特别是利用函数内积来将任意函数表示为一系列正弦和余弦函数的组合。

谢谢大家。

---


**视频主题：希尔伯特空间中的内积 (主要关注函数内积)**

**一、 引言与目的 (0:06 - 0:46)**
- 目的：在介绍傅里叶变换/级数之前，回顾函数的内积概念。
- 核心观点：将证明函数内积的定义与我们熟悉的向量内积定义具有一致性。
- 类比：从熟悉的向量空间（二维、三维、N维）过渡到函数空间。

**二、 函数内积的定义 (0:46 - 2:02)**
- 设定：考虑定义在区间 [A, B] 上的两个函数 f(x) 和 g(x)。
- 定义：f(x) 与 g(x) 的内积定义为它们乘积在区间 [A, B] 上的积分：`<f, g> = ∫[A,B] f(x)g(x) dx`。
- 复函数情况：如果函数是复值函数（如傅里叶分析中），定义包含一个复共轭：`<f, g> = ∫[A,B] f(x) * g(x)的复共轭 dx`。（对于实函数，g的复共轭就是g本身）。
- 意义：函数内积衡量两个函数的相似度或对齐程度 (2:02 - 2:17)，类似于向量内积。

**三、 通过离散化连接函数内积与向量内积 (2:25 - 8:11)**
- **1. 函数离散化 (2:47 - 3:52)**
    - 方法：在区间 [A, B] 上以固定间隔 Δx 对函数 f(x) 和 g(x) 进行 N 次采样。
    - 采样点：x1, x2, ..., xn。
    - 采样值：f1, f2, ..., fn (f(x1), f(x2), ...) 和 g1, g2, ..., gn (g(x1), g(x2), ...)。
    - 结果：得到两个 N 维数据向量 F = [f1, ..., fn]^T 和 G = [g1, ..., gn]^T。
- **2. 向量内积计算 (4:16 - 6:16)**
    - 定义：向量 F 和 G 的内积（点积）为 G^T * F = Σ (fk * gk) (k 从 1 到 N)。
    - 复向量情况：使用共轭转置 G^H * F = Σ (fk * gk的复共轭)。
- **3. 引入归一化因子 Δx (6:16 - 7:22)**
    - 问题：直接求和 Σ (fk * gk) 会使得内积大小依赖于采样点数 N（N 越大，和越大）。
    - 解决：将向量内积乘以采样间隔 Δx 进行修正/归一化。
    - 修正后的形式：`<F, G>_Δx = (Σ fk * gk) * Δx = Σ f(xk) * g(xk) * Δx`。
- **4. 极限与黎曼和 (7:22 - 8:11)**
    - 关键联系：修正后的离散内积 Σ f(xk) * g(xk) * Δx 正是函数内积积分 ∫ f(x)g(x) dx 的黎曼和 (Riemann sum) 近似。
    - 收敛：当采样间隔 Δx 趋于 0（即采样点数 N 趋于无穷，分辨率无限提高）时，这个黎曼和收敛于连续函数的积分内积定义。

**四、 结论与意义 (8:11 - 8:38)**
- 核心思想重申：函数内积的定义并非凭空产生，它是向量内积概念在数据分辨率趋于无限精细时的自然推广。
- 应用前景：理解函数内积对于后续学习傅里叶级数（用正弦余弦表示任意函数）至关重要。